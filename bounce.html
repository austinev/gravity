<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>gravity</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <!-- Bootstrap File -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>
  </head>
  <body>
    <div class="container" style="position:relative">
      <h1>Click to start</h1>
      <button type="button" class="btn btn-primary start_button">Start</button>
      <button type="button" class="btn btn-primary reset_button">Reset</button>
      <img
        src="ball.png"
        alt=""
        id="ball_img"
        style="position:absolute; top:100px; left: 80px; z-index: -20; height: 30px"
      />
      <img
        src="bar.png"
        alt=""
        class="bar_img"
        style="position:absolute; top:500px; left: 20px; z-index: -20; width: 1000px"
      />
    </div>

    <script>
      //var running = false;
      //gravity simulation.  v=gt in m/s.  so for given ticks, the velocity changes.  then the vertical increment changes
      //
      var floor = 478; //the bounce spot?
      var ball_El = document.getElementById("ball_img");
      const start_x = 100;
      const start_y = 100;
      var x = start_x;
      var y = start_y;
      var math_y=1000;
      var v_y = 0; //velocity starts at zero
      const earth_g = 9.8/100; //earth G  divide this by 100 to make it look right.  or there is a relationship betwen the tick time...
      var t = 0; //time
      var increment = 1; //the amount to change per tick.

      //var pos = 0;
      var timer;
      draw(x, y);

      $(".start_button").on("click", function() {
        reset();
        draw(start_x, start_y);
        clearInterval(timer);
        timer = setInterval(frame, 10);
      });

      $(".reset_button").on("click", function() {
        reset();
        draw(start_x, start_y);
        clearInterval(timer);
      });

      function frame() {
        if (y > floor) {
          //clearInterval(timer);
          v_y = v_y * -1;
        } else {
          if (x>1000){
            reset();
            draw(start_x, start_y);
          clearInterval(timer);
          }
          
        }
          t++; //time advances
          v_y = earth_g +v_y; //m/s
          console.log("v is " + v_y);
          console.log("x is " + x);
          //console.log("y is " + y);
          console.log("y is " + math_y);
          x++; //sideways vector isn't affected by gravity
          y = y + v_y;
          math_y=math_y-v_y;
          draw(x, y);
      }

      function draw(x, y) {
        ball_El.style.top = y + "px";
        ball_El.style.left = x + "px";
      }

      function reset() {
        console.log("================================");
        x = start_x;
        y = start_y;
        v_y = 0;
        t = 0;
      }
    </script>
  </body>
</html>
